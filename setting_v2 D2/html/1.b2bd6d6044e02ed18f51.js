(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+Tj5":function(t,e,n){"use strict";n.d(e,"a",function(){return l});var i=n("jtHE"),o=n("vkgz"),s=n("mkZv"),c=n("jMnz"),a=n("fXoL"),r=n("tk/3"),d=n("BUd1");let l=(()=>{class t{constructor(t,e,n){this.api=t,this.http=e,this.keyboard=n,this.button$=new i.a(1),this.buttonOld$=new i.a(1)}getKeyboardMetaByOld(t){const e=Object.assign(Object.assign({},s.p.button.read),{session:t});return this.http.post(this.api,e)}updataButtonByOld(t,e){const n=Object.assign(Object.assign({},s.p.button.write),{session:t,data:e});return this.http.post(this.api,n)}updateButton(t,e){const n=Object.assign(Object.assign({},s.p.button2.write),{session:t,data:e});return this.http.post(this.api,n)}getKeyboardMeta(t){const e=Object.assign(Object.assign({},s.p.button2.read),{session:t});return this.http.post(this.api,e).pipe(Object(o.a)(t=>{this.keyboard.updateButtonDisplayCache(t.data)}))}}return t.\u0275fac=function(e){return new(e||t)(a.Xb(c.a),a.Xb(r.b),a.Xb(d.a))},t.\u0275prov=a.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},BUd1:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n("YMfE"),o=n("mkZv"),s=n("fXoL"),c=n("gZGI");let a=(()=>{class t{constructor(t){this.cache=t,this._displayCache=new Map,this._size={width:0,height:0}}updateButtonDisplayCache(t){this._displayCache.clear(),t.forEach(t=>{this._displayCache.set(t.number,t.info)})}get displayCache(){return this._displayCache}get size(){return this._size}getDisplay(t){return this._displayCache.get(t)}calcKeyboardSize(t){const e=Math.min(...t.map(t=>t.key_site_x-t.key_shape_x/2)),n=Math.max(...t.map(t=>t.key_site_y+t.key_shape_y/2)),i=Math.max(...t.map(t=>t.key_site_x+t.key_shape_x/2));return this._size={width:i+e,height:n+e},this._size}calcKeyboardRatio(t,e,n,i){return t/e<=n/i?i/e:n/t}clacButtonSize(t,e){return Object.assign(Object.assign({},t),{info:{key_shape_r:t.info.key_shape_r*e,key_shape_x:t.info.key_shape_x*e,key_shape_y:t.info.key_shape_y*e,key_site_x:(t.info.key_site_x-t.info.key_shape_x/2)*e,key_site_y:(t.info.key_site_y-t.info.key_shape_y/2)*e,key_type:t.info.key_type}})}createButtonDisplay(t,e){const{info:n}=this.clacButtonSize(t,e);let i={top:n.key_site_y+"px",left:n.key_site_x+"px",width:n.key_shape_x+"px",height:n.key_shape_y+"px","border-radius":n.key_shape_r+"px","z-index":0,"box-shadow":"0 1px 3px black",background:""};switch(n.key_type){case o.n.Key:i["z-index"]=1;break;case o.n.LeftRotary:i["border-radius"]=`${n.key_shape_x}px 0 0 ${n.key_shape_x}px`;break;case o.n.RightRotary:i["border-radius"]=`0 ${n.key_shape_x}px ${n.key_shape_x}px 0`}return i}getButtonName(t,e){const n=t.key_data[e],s=this.cache.getAssetsByMain(o.d.Button).mode.find(t=>t.code===n.mode);if(0===n.mode){const t=Object(i.o)(Object(i.i)(n.values[0],o.t),""),e=Object(i.m)(n.values[1]);return Object(i.p)(t,e)}return s?s.name:""}getLightButtonName(t){return this.cache.getAssetsByMain(o.d.LightsV2).mode.find(e=>e.code===t.code).name}getLightButtonColor(t){const e=t.values;return`rgba(${e[3]},${e[4]},${e[5]})`}}return t.\u0275fac=function(e){return new(e||t)(s.Xb(c.a))},t.\u0275prov=s.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},JxTr:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("XNiG"),o=n("mkZv"),s=n("jMnz"),c=n("fXoL"),a=n("tk/3");let r=(()=>{class t{constructor(t,e){this.api=t,this.http=e,this.stepUpdate$=new i.a}renameByScript(t,e){return this.switchScript(t,e)}getScripts(t){const e=Object.assign(Object.assign({},o.p.scriptSw.read),{session:t});return this.http.post(this.api,e)}switchScript(t,e){const n=Object.assign(Object.assign({},o.p.scriptSw.write),{session:t,data:e});return this.http.post(this.api,n)}getScriptsSteps(t){const e=Object.assign(Object.assign({},o.p.script.read),{session:t});return this.http.post(this.api,e)}writeScriptSteps(t,e){const n=Object.assign(Object.assign({},o.p.script.write),{session:t,data:e});return this.http.post(this.api,n)}}return t.\u0275fac=function(e){return new(e||t)(c.Xb(s.a),c.Xb(a.b))},t.\u0275prov=c.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},XVKj:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n("fXoL"),o=n("YMfE"),s=n("BUd1"),c=n("ofXK"),a=n("znSr"),r=n("Qu3c"),d=n("sYmb");function l(t,e){if(1&t){const t=i.Ub();i.Rb(0),i.Tb(1,"div",4),i.bc("click",function(){i.tc(t);const n=e.$implicit;return i.fc(2).selectButton(n.number)}),i.Gc(2),i.gc(3,"translate"),i.Sb(),i.Qb()}if(2&t){const t=e.$implicit;i.Bb(1),i.kc("ngStyle",t.display)("matTooltip",t.name),i.Bb(1),i.Ic(" ",i.hc(3,3,t.name)," ")}}function h(t,e){if(1&t&&(i.Tb(0,"div",2),i.Ec(1,l,4,5,"ng-container",3),i.Sb()),2&t){const t=i.fc();i.kc("ngStyle",t.keyboardContanerDisplay),i.Bb(1),i.kc("ngForOf",t.buttons)}}let u=(()=>{class t{constructor(t){this.keyboard=t,this.selected=new i.o,this.ratio=1,this.buttons=[],this.keyboardContanerDisplay={width:"1200px",height:"450px"}}ngOnInit(){const t=this.buttonList.map(t=>t.info),{width:e,height:n}=this.keyboard.calcKeyboardSize(t);this.ratio=this.keyboard.calcKeyboardRatio(e,n,1200,450),this.keyboardContanerDisplay={width:e*this.ratio+"px",height:n*this.ratio+"px"},this.updateButtons(this.buttonList)}ngOnChanges(t){const{buttonList:e,fn:n}=t;(e||n)&&this.updateButtons(this.buttonList)}selectButton(t){const e=this.buttonList.find(e=>e.number===t);this.selected.emit(e)}updateButtons(t){this.buttons=t.filter(o.x).map(t=>({display:this.keyboard.createButtonDisplay(t,this.ratio),name:this.keyboard.getButtonName(t,this.fn),number:t.number}))}}return t.\u0275fac=function(e){return new(e||t)(i.Nb(s.a))},t.\u0275cmp=i.Hb({type:t,selectors:[["keyboard-render"]],inputs:{buttonList:"buttonList",fn:"fn"},outputs:{selected:"selected"},features:[i.zb],decls:2,vars:2,consts:[[1,"keyboard-container","flex-center",3,"ngStyle"],["class","keyboard-box",3,"ngStyle",4,"ngIf"],[1,"keyboard-box",3,"ngStyle"],[4,"ngFor","ngForOf"],["matTooltipPosition","above",1,"sayo-button","one-line",3,"ngStyle","matTooltip","click"]],template:function(t,e){1&t&&(i.Tb(0,"div",0),i.Ec(1,h,2,2,"div",1),i.Sb()),2&t&&(i.kc("ngStyle",e.keyboardContanerDisplay),i.Bb(1),i.kc("ngIf",(null==e.buttons?null:e.buttons.length)>0))},directives:[c.l,a.a,c.k,c.j,r.a],pipes:[d.c],styles:[".keyboard-container[_ngcontent-%COMP%]   .keyboard-box[_ngcontent-%COMP%]{position:relative;background:#111;box-shadow:0 6px 15px 4px #222;border-radius:8px}.keyboard-container[_ngcontent-%COMP%]   .keyboard-box[_ngcontent-%COMP%]   .sayo-button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-size:12px;cursor:pointer;position:absolute;background-color:#2e353b;z-index:1}.keyboard-container[_ngcontent-%COMP%]   .keyboard-box[_ngcontent-%COMP%]   .sayo-button.active[_ngcontent-%COMP%], .keyboard-container[_ngcontent-%COMP%]   .keyboard-box[_ngcontent-%COMP%]   .sayo-button[_ngcontent-%COMP%]:hover{background-color:#c2185b}"]}),t})()},cgZG:function(t,e,n){"use strict";n.d(e,"b",function(){return v}),n.d(e,"c",function(){return S.a}),n.d(e,"d",function(){return _}),n.d(e,"f",function(){return w}),n.d(e,"h",function(){return N}),n.d(e,"a",function(){return z}),n.d(e,"g",function(){return F}),n.d(e,"e",function(){return D});var i=n("0IaG"),o=n("XNiG"),s=n("1G5W"),c=n("gcYM"),a=n("mkZv"),r=n("fXoL"),d=n("0MNC"),l=n("A5z7"),h=n("ofXK"),u=n("znSr"),b=n("XiUz");function p(t,e){if(1&t){const t=r.Ub();r.Rb(0),r.Tb(1,"div",3),r.bc("click",function(){r.tc(t);const n=e.$implicit;return r.fc().select(n.code)}),r.Gc(2),r.Sb(),r.Qb()}if(2&t){const t=e.$implicit,n=r.fc();r.Bb(1),r.Fb("active",t.code===n.value),r.kc("ngStyle",t.display),r.Bb(1),r.Ic(" ",t.name," ")}}let g=(()=>{class t{constructor(){this.selected=new r.o,this.ratio=1,this.keyboardBoxDisplay={width:"",height:""}}ngOnInit(){this.render()}ngOnChanges(t){const{code:e}=t;e&&(this.value=e.currentValue)}render(t=1200,e=400){this.containerW=t,this.containerH=e,this.keyboardContanerDisplay={width:this.containerW+"px",height:this.containerH+"px"};const{dataSource:n}=this,{boxWidth:i,boxHeight:o}=this.getKeyboardBoxDisplay(n);this.ratio=this.getKeyboardRatio(i,o),this.updateBoxDisplay(i,o,this.ratio),this.updateButtons(n,this.ratio)}select(t){this.selected.emit(t)}updateButtons(t,e){this.buttons=t.map(t=>{const{code:n,name:i,size:o}=this.resizeKeyboard(t,e);return{code:n,name:i,display:this.getButtonDisplay({code:n,name:i,size:o})}})}getButtonDisplay(t){const{top:e,left:n,width:i,height:o,radius:s}=t.size;return{top:e+"px",left:n+"px",width:i+"px",height:o+"px","border-radius":s+"px"}}updateBoxDisplay(t,e,n){this.keyboardBoxDisplay.width=t*n+"px",this.keyboardBoxDisplay.height=e*n+"px",this.updateContanerDispaly(this.keyboardBoxDisplay.width,this.keyboardBoxDisplay.height)}updateContanerDispaly(t,e){this.keyboardContanerDisplay.width=t,this.keyboardContanerDisplay.height=e}getKeyboardBoxDisplay(t){const e=Math.min(...t.map(t=>t.size.left-t.size.width/2)),n=Math.max(...t.map(t=>t.size.top+t.size.height/2));return{boxWidth:Math.max(...t.map(t=>t.size.left+t.size.width/2))+e,boxHeight:n+e}}getKeyboardRatio(t,e){return t/e<=this.containerW/this.containerH?this.containerH/e:this.containerW/t}resizeKeyboard(t,e){const{code:n,name:i}=t,{top:o,left:s,width:c,height:a,radius:r}=t.size;return{code:n,name:i,size:{top:(o-a/2)*e,left:(s-c/2)*e,width:c*e,height:a*e,radius:r*e}}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Hb({type:t,selectors:[["sayo-key-render"]],inputs:{dataSource:"dataSource",code:"code"},outputs:{selected:"selected"},features:[r.zb],decls:3,vars:3,consts:[[1,"keyboard-container",3,"ngStyle"],[1,"keyboard-box",3,"ngStyle"],[4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","center center",1,"sayo-button",3,"ngStyle","click"]],template:function(t,e){1&t&&(r.Tb(0,"div",0),r.Tb(1,"div",1),r.Ec(2,p,3,4,"ng-container",2),r.Sb(),r.Sb()),2&t&&(r.kc("ngStyle",e.keyboardContanerDisplay),r.Bb(1),r.kc("ngStyle",e.keyboardBoxDisplay),r.Bb(1),r.kc("ngForOf",e.buttons))},directives:[h.l,u.a,h.j,b.b,b.a],styles:[".keyboard-container[_ngcontent-%COMP%]   .keyboard-box[_ngcontent-%COMP%]{position:relative}.keyboard-container[_ngcontent-%COMP%]   .keyboard-box[_ngcontent-%COMP%]   .sayo-button[_ngcontent-%COMP%]{cursor:pointer;position:absolute;background-color:#616161;font-size:12px}.keyboard-container[_ngcontent-%COMP%]   .keyboard-box[_ngcontent-%COMP%]   .sayo-button.active[_ngcontent-%COMP%], .keyboard-container[_ngcontent-%COMP%]   .keyboard-box[_ngcontent-%COMP%]   .sayo-button[_ngcontent-%COMP%]:hover{background-color:#c2185b}"]}),t})();var m=n("bTqV"),f=n("sYmb");const y=["keyRenderRef"],O=function(t,e){return{active:t,link:e}};function k(t,e){if(1&t){const t=r.Ub();r.Tb(0,"mat-chip",10),r.bc("click",function(){r.tc(t);const n=e.$implicit;return r.fc().code=n.code}),r.Tb(1,"pre"),r.Gc(2),r.Sb(),r.Sb()}if(2&t){const t=e.$implicit,n=r.fc();r.Db(r.oc(4,O,t.code===n.code&&0!==t.code,0!==t.code)),r.kc("disabled",0===t.code),r.Bb(2),r.Hc(null==t?null:t.name)}}let v=(()=>{class t{constructor(t,e,n){this.data=t,this._dialogRef=e,this.breakpointObserver=n,this.destory$=new o.a,this.commonOpt=a.q,this.LinuxOpt=a.s,this.code=t.code}ngOnInit(){this.breakpointObserver.observe(["(max-width: 1280px)"]).pipe(Object(s.a)(this.destory$),Object(c.a)(17)).subscribe(t=>{setTimeout(()=>{t.matches?this.keyRender.render(1080,280):this.keyRender.render(1200,450)},16)})}confirm(){this._dialogRef.close({code:this.code})}ngOnDestroy(){this.destory$.next(),this.destory$.complete()}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(i.a),r.Nb(i.g),r.Nb(d.a))},t.\u0275cmp=r.Hb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&r.zc(y,!0),2&t){let t;r.pc(t=r.cc())&&(e.keyRender=t.first)}},decls:22,vars:17,consts:[[1,"content"],["color","primary",3,"click"],[1,"list-name"],[1,"rander-wrapper"],[3,"dataSource","code","selected"],["keyRenderRef",""],["color","primary",3,"disabled","class","click",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"click"],["color","primary",3,"disabled","click"]],template:function(t,e){1&t&&(r.Tb(0,"div",0),r.Tb(1,"mat-chip-list"),r.Tb(2,"mat-chip",1),r.bc("click",function(){return e.code=0}),r.Gc(3," None "),r.Sb(),r.Sb(),r.Tb(4,"div",2),r.Gc(5),r.gc(6,"translate"),r.Sb(),r.Tb(7,"div",3),r.Tb(8,"sayo-key-render",4,5),r.bc("selected",function(t){return e.code=t}),r.Sb(),r.Sb(),r.Tb(10,"div",2),r.Gc(11),r.gc(12,"translate"),r.Sb(),r.Tb(13,"mat-chip-list"),r.Ec(14,k,3,7,"mat-chip",6),r.Sb(),r.Sb(),r.Tb(15,"div",7),r.Tb(16,"button",8),r.Gc(17),r.gc(18,"translate"),r.Sb(),r.Tb(19,"button",9),r.bc("click",function(){return e.confirm()}),r.Gc(20),r.gc(21,"translate"),r.Sb(),r.Sb()),2&t&&(r.Bb(2),r.Fb("active",0===e.code),r.Bb(3),r.Hc(r.hc(6,9,"MANAGE.KEY.GENERAL_KEY")),r.Bb(3),r.kc("dataSource",e.commonOpt)("code",e.code),r.Bb(3),r.Ic(" ",r.hc(12,11,"MANAGE.KEY.LINUX_ONLY_KEY")," "),r.Bb(3),r.kc("ngForOf",e.LinuxOpt),r.Bb(3),r.Ic(" ",r.hc(18,13,"COMMON.CANCEL")," "),r.Bb(3),r.Ic(" ",r.hc(21,15,"COMMON.CONFIRM")," "))},directives:[l.b,l.a,g,h.j,i.c,m.a,i.d],pipes:[f.c],styles:[".content[_ngcontent-%COMP%] {\n        padding: 3rem 0;\n        max-height: 80vh;\n        overflow-y: auto;\n        overflow-x: hidden;\n      }\n      .active[_ngcontent-%COMP%], mat-chip[_ngcontent-%COMP%]:hover {\n        cursor: pointer;\n        color: #fff;\n        background-color: #c2185b;\n      }\n\n      .list-name[_ngcontent-%COMP%] {\n        text-align: center;\n        margin: 3rem 0 1rem;\n        font-size: 24px;\n      }\n\n      .spacer[_ngcontent-%COMP%] {\n        color: transparent;\n      }\n\n      .warn-tip[_ngcontent-%COMP%] {\n        position: absolute;\n        top: 3rem;\n        left: 50%;\n        transform: translateX(-50%);\n        background: #e09a2a;\n        padding: 0.5rem 1rem;\n        border-radius: 8px;\n        color: #ffffff;\n        font-size: 14px;\n        z-index: 10;\n      }"]}),t})();var S=n("cnJX");function C(t,e){if(1&t){const t=r.Ub();r.Tb(0,"mat-chip",5),r.bc("click",function(){r.tc(t);const n=e.$implicit;return r.fc().code=n.code}),r.Tb(1,"pre"),r.Gc(2),r.gc(3,"translate"),r.Sb(),r.Sb()}if(2&t){const t=e.$implicit,n=r.fc();r.Fb("active",t.code===n.code),r.Bb(2),r.Hc(r.hc(3,3,t.name))}}let _=(()=>{class t{constructor(t,e){this.data=t,this._dialogRef=e,this.options=[...t.opts],this.code=t.code}confirm(){this._dialogRef.close({code:this.code})}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(i.a),r.Nb(i.g))},t.\u0275cmp=r.Hb({type:t,selectors:[["ng-component"]],decls:10,vars:7,consts:[[1,"content"],["color","primary",3,"active","click",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"click"],["color","primary",3,"click"]],template:function(t,e){1&t&&(r.Tb(0,"div",0),r.Tb(1,"mat-chip-list"),r.Ec(2,C,4,5,"mat-chip",1),r.Sb(),r.Sb(),r.Tb(3,"div",2),r.Tb(4,"button",3),r.Gc(5),r.gc(6,"translate"),r.Sb(),r.Tb(7,"button",4),r.bc("click",function(){return e.confirm()}),r.Gc(8),r.gc(9,"translate"),r.Sb(),r.Sb()),2&t&&(r.Bb(2),r.kc("ngForOf",e.options),r.Bb(3),r.Ic(" ",r.hc(6,3,"COMMON.CANCEL")," "),r.Bb(3),r.Ic(" ",r.hc(9,5,"COMMON.CONFIRM")," "))},directives:[l.b,h.j,i.c,m.a,i.d,l.a],pipes:[f.c],styles:[".content[_ngcontent-%COMP%] {\n        padding: 3rem 0;\n      }\n      .active[_ngcontent-%COMP%] {\n        color: #fff;\n        background-color: #c2185b;\n      }\n\n      .list-name[_ngcontent-%COMP%] {\n        text-align: center;\n        margin: 3rem 0 1rem;\n        font-size: 24px;\n      }\n\n      .spacer[_ngcontent-%COMP%] {\n        color: transparent;\n      }"]}),t})();var x=n("YMfE");function M(t,e){if(1&t){const t=r.Ub();r.Tb(0,"mat-chip",7),r.bc("click",function(){r.tc(t);const n=e.$implicit;return r.fc(2).select(n.code)}),r.Gc(1),r.gc(2,"translate"),r.Sb()}if(2&t){const t=e.$implicit,n=r.fc(2);r.Fb("active",n.hasCode(t.code)),r.Bb(1),r.Ic(" ",r.hc(2,3,t.name)," ")}}function B(t,e){if(1&t&&(r.Tb(0,"div",5),r.Tb(1,"mat-chip-list"),r.Ec(2,M,3,5,"mat-chip",6),r.Sb(),r.Sb()),2&t){const t=r.fc();r.Bb(2),r.kc("ngForOf",t.options)}}let w=(()=>{class t{constructor(t,e){this.data=t,this._dialogRef=e,this.selectCode=new Set,this.options=this.data.opts,Object(x.i)(t.code,a.t).forEach(t=>{this.selectCode.add(t.code)})}hasCode(t){return this.selectCode.has(t)}select(t){this.hasCode(t)?this.selectCode.delete(t):this.selectCode.add(t)}confirm(){const t=this.selectCode.size>0?[...this.selectCode].reduce((t,e)=>t+e):0;this._dialogRef.close({code:t})}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(i.a),r.Nb(i.g))},t.\u0275cmp=r.Hb({type:t,selectors:[["ng-component"]],decls:10,vars:7,consts:[["mat-dialog-title",""],["class","content",4,"ngIf"],["mat-dialog-actions",""],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"click"],[1,"content"],["color","primary",3,"active","click",4,"ngFor","ngForOf"],["color","primary",3,"click"]],template:function(t,e){1&t&&(r.Tb(0,"div",0),r.Gc(1),r.gc(2,"translate"),r.Sb(),r.Ec(3,B,3,1,"div",1),r.Tb(4,"div",2),r.Tb(5,"button",3),r.Gc(6,"Cancel"),r.Sb(),r.Tb(7,"button",4),r.bc("click",function(){return e.confirm()}),r.Gc(8),r.gc(9,"translate"),r.Sb(),r.Sb()),2&t&&(r.Bb(1),r.Hc(r.hc(2,3,"COMMON.MULTI")),r.Bb(2),r.kc("ngIf",e.options),r.Bb(5),r.Ic(" ",r.hc(9,5,"COMMON.CONFIRM")," "))},directives:[i.h,h.k,i.c,m.a,i.d,l.b,h.j,l.a],pipes:[f.c],styles:[".content[_ngcontent-%COMP%] {\n        padding: 3rem 0;\n      }\n      .active[_ngcontent-%COMP%] {\n        color: #fff;\n        background-color: #c2185b;\n      }"]}),t})();n("zjsp");var T=n("P/1d");let N=(()=>{class t{constructor(t,e){this.data=t,this._dialogRef=e,this.color=this.code2Color(t.codes)}confirm(){const t=this.color2Code(this.color);this._dialogRef.close({code:t})}changeColorComplete(t){this.color=t.color.rgb}code2Color(t){return{r:t[0],g:t[1],b:t[2],a:1}}color2Code(t){return[t.r,t.g,t.b]}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(i.a),r.Nb(i.g))},t.\u0275cmp=r.Hb({type:t,selectors:[["ng-component"]],decls:4,vars:5,consts:[[3,"disableAlpha","color","onChangeComplete"],["mat-raised-button","","color","primary",1,"confirm-btn",3,"click"]],template:function(t,e){1&t&&(r.Tb(0,"color-sketch",0),r.bc("onChangeComplete",function(t){return e.changeColorComplete(t)}),r.Sb(),r.Tb(1,"button",1),r.bc("click",function(){return e.confirm()}),r.Gc(2),r.gc(3,"translate"),r.Sb()),2&t&&(r.kc("disableAlpha",!0)("color",e.color),r.Bb(2),r.Ic(" ",r.hc(3,3,"COMMON.CONFIRM")," "))},directives:[T.b,m.a],pipes:[f.c],styles:[".confirm-btn[_ngcontent-%COMP%] {\n        width: 100%;\n        margin-top: 3rem;\n      }"]}),t})();var j=n("+Tj5"),P=n("gZGI"),$=n("WTUP");function I(t,e){if(1&t){const t=r.Ub();r.Tb(0,"sayo-options-item",1),r.bc("changed",function(n){r.tc(t);const i=e.$implicit;return r.fc().onParamsChange(n,null==i?null:i.type,null==i?null:i.index)}),r.Sb()}2&t&&r.kc("opt",e.$implicit)}let z=(()=>{class t{constructor(t,e,n,i){this.data=t,this.buttonsService=e,this.cacheService=n,this.loadService=i,this.options=[],this.result=[],this.destory$=new o.a,this.currentButton=t.button,this.modeList=[...t.buttonCmdOpt.mode],this.mode=t.button.code,this.modeOption={type:"Select",title:"MANAGE.KEY.KEY_MODE",code:this.mode,opts:t.buttonCmdOpt.mode}}ngOnInit(){this.updateOptMeta(this.oprations,this.data.button.values)}onModeChange(t){this.loadService.loading(),this.mode=t,this.updateOptMeta(this.oprations);const e=this.createButton(t);this.buttonsService.updataButtonByOld(this.data.session,[e]).pipe(Object(s.a)(this.destory$)).subscribe(t=>this.updateButtons())}onParamsChange(t,e,n){this.loadService.loading(),"String"===e?this.result=Object(x.d)(t):this.result[n]=t,this.write(this.createButton(this.mode))}updateButtons(){this.buttonsService.buttonOld$.next(this.currentButton)}updateOptMeta(t,e){this.options=[],t.map(t=>t.replace(".json","")).filter(t=>"no_more"!==t).forEach((t,n)=>{const i=this.cacheService.getAssets(t),o=a.h[t];this.result[n]=e?e[n]:i.defVal,this.options.push(Object.assign(Object.assign({},{type:o,index:n,title:i.title,min:null==i?void 0:i.min,max:null==i?void 0:i.max,opts:i.data}),"String"===o?{code:e||Object(x.d)([i.defVal])}:{code:e?e[n]:i.defVal}))}),this.result=Object(x.d)(this.result),this.loadService.complete()}createButton(t){const{number:e}=this.currentButton;return{code:t,number:e,values:new Array(4).fill(0).map((t,e)=>this.result[e]?this.result[e]:t)}}write(t){this.buttonsService.updataButtonByOld(this.data.session,[t]).pipe(Object(s.a)(this.destory$)).subscribe(e=>{this.currentButton=t,this.updateOptMeta(this.oprations,this.currentButton.values),this.updateButtons()})}get oprations(){return this.modeList.find(t=>t.code===this.mode).values}ngOnDestroy(){this.destory$.next(),this.destory$.complete()}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(i.a),r.Nb(j.a),r.Nb(P.a),r.Nb($.a))},t.\u0275cmp=r.Hb({type:t,selectors:[["ng-component"]],decls:6,vars:5,consts:[[1,"option-container"],[3,"opt","changed"],[3,"opt","changed",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary","matDialogClose","",1,"confirm-btn"]],template:function(t,e){1&t&&(r.Tb(0,"div",0),r.Tb(1,"sayo-options-item",1),r.bc("changed",function(t){return e.onModeChange(t)}),r.Sb(),r.Ec(2,I,1,1,"sayo-options-item",2),r.Tb(3,"button",3),r.Gc(4),r.gc(5,"translate"),r.Sb(),r.Sb()),2&t&&(r.Bb(1),r.kc("opt",e.modeOption),r.Bb(1),r.kc("ngForOf",e.options),r.Bb(2),r.Ic(" ",r.hc(5,3,"COMMON.CONFIRM")," "))},styles:[".option-container[_ngcontent-%COMP%]{height:100%;width:30rem}.confirm-btn[_ngcontent-%COMP%]{width:100%;margin-top:3rem}"]}),t})();n("XVKj"),n("ysIn");var E=n("JxTr");function G(t,e){if(1&t){const t=r.Ub();r.Tb(0,"sayo-options-item",1),r.bc("changed",function(n){r.tc(t);const i=e.$implicit;return r.fc().onParamsChange(n,null==i?null:i.type,null==i?null:i.index)}),r.Sb()}2&t&&r.kc("opt",e.$implicit)}let F=(()=>{class t{constructor(t,e,n,i,s){this.data=t,this.scriptService=e,this.cacheService=n,this.loadService=i,this._dialogRef=s,this.options=[],this.result=[],this.destory$=new o.a,this.current=t.scriptStep,this.modeList=[...t.scriptCmdOpt.mode],this.mode=t.scriptStep.code,this.modeOption={type:"Select",title:"MANAGE.KEY.STEP_TYPE",code:this.mode,opts:t.scriptCmdOpt.mode}}ngOnInit(){this.updateOptMeta(this.oprations,this.current.values)}confirm(){this._dialogRef.close()}onModeChange(t){this.loadService.loading(),this.mode=t,this.updateOptMeta(this.oprations);const e=this.createScriptStep(t);this.scriptService.writeScriptSteps(this.data.session,[e]).pipe(Object(s.a)(this.destory$)).subscribe(t=>{this.updateStep(e)})}get oprations(){return this.modeList.find(t=>t.code===this.mode).values}updateOptMeta(t,e){this.options=[],t.map(t=>t.replace(".json","")).forEach((t,n)=>{if("no_more"!==t){const i=this.cacheService.getAssets(t),o=a.h[t];this.result[n]=e?e[n]:i.defVal,this.options.push(Object.assign(Object.assign({},{type:o,index:n,title:i.title,min:null==i?void 0:i.min,max:null==i?void 0:i.max,opts:i.data}),"Color"===o?{code:e?e.slice(n,n+3):i.defVal}:{code:e?e[n]:i.defVal}))}}),this.result=Object(x.d)(this.result),this.loadService.complete()}onParamsChange(t,e,n){this.loadService.loading(),"Color"===e?this.result=Object(x.d)(t):this.result[n]=t;const i=this.createScriptStep(this.mode);this.write(i)}createScriptStep(t){const{number:e}=this.current;return{code:t,number:e,values:Object(x.d)(this.result)}}updateStep(t){this.scriptService.stepUpdate$.next()}write(t){this.scriptService.writeScriptSteps(this.data.session,[t]).pipe(Object(s.a)(this.destory$)).subscribe(()=>{this.updateOptMeta(this.oprations,this.result),this.updateStep(t)})}ngOnDestroy(){this.destory$.next(),this.destory$.complete()}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(i.a),r.Nb(E.a),r.Nb(P.a),r.Nb($.a),r.Nb(i.g))},t.\u0275cmp=r.Hb({type:t,selectors:[["ng-component"]],decls:6,vars:5,consts:[[1,"option-container"],[3,"opt","changed"],[3,"opt","changed",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary","matDialogClose","",1,"confirm-btn"]],template:function(t,e){1&t&&(r.Tb(0,"div",0),r.Tb(1,"sayo-options-item",1),r.bc("changed",function(t){return e.onModeChange(t)}),r.Sb(),r.Ec(2,G,1,1,"sayo-options-item",2),r.Tb(3,"button",3),r.Gc(4),r.gc(5,"translate"),r.Sb(),r.Sb()),2&t&&(r.Bb(1),r.kc("opt",e.modeOption),r.Bb(1),r.kc("ngForOf",e.options),r.Bb(2),r.Ic(" ",r.hc(5,3,"COMMON.CONFIRM")," "))},styles:[".option-container[_ngcontent-%COMP%]{height:100%;width:30rem}.confirm-btn[_ngcontent-%COMP%]{width:100%;margin-top:3rem}"]}),t})();function L(t,e){if(1&t){const t=r.Ub();r.Tb(0,"sayo-options-item",1),r.bc("changed",function(n){r.tc(t);const i=e.$implicit;return r.fc().onParamsChange(n,null==i?null:i.type,null==i?null:i.index)}),r.Sb()}2&t&&r.kc("opt",e.$implicit)}let D=(()=>{class t{constructor(t,e,n,i){this.data=t,this.buttonsService=e,this.cacheService=n,this.loadService=i,this.options=[],this.result=[],this.destory$=new o.a,this.currentButton=t.button,this.modeList=[...t.buttonCmdOpt.mode],this.mode=t.button.key_data[t.fn].mode,this.modeOption={type:"Select",title:"MANAGE.KEY.KEY_MODE",code:this.mode,opts:t.buttonCmdOpt.mode}}ngOnInit(){this.updateOptMeta(this.oprations,this.fnOpts)}onModeChange(t){this.loadService.loading(),this.mode=t,this.updateOptMeta(this.oprations);const e=this.createButton(t,this.result);this.buttonsService.updateButton(this.data.session,[e]).pipe(Object(s.a)(this.destory$)).subscribe(t=>this.updateButtons(e))}onParamsChange(t,e,n){this.loadService.loading(),this.result[n]=t,this.write(this.createButton(this.mode,this.result))}updateButtons(t){this.buttonsService.button$.next(t)}updateOptMeta(t,e){this.options=[],t.forEach((t,n)=>{const i=this.cacheService.getAssets(t.split(".")[0]);this.result[n]=e?e[n]:i.defVal,this.options[n]={type:a.h[t.split(".")[0]],title:i.title,code:e?e[n]:i.defVal,opts:i.data,min:i.min,max:i.max,index:n}}),this.loadService.complete()}createButton(t,e){const n=this.currentButton.key_data;return n[this.data.fn].mode=t,e&&e.length>0&&(n[this.data.fn].values=e),Object.assign(Object.assign({},this.currentButton),{key_data:n})}write(t){this.buttonsService.updateButton(this.data.session,[t]).pipe(Object(s.a)(this.destory$)).subscribe(e=>{this.currentButton=e.data[0],this.updateOptMeta(this.oprations,this.fnOpts),this.updateButtons(t)})}get oprations(){return this.modeList.find(t=>t.code===this.mode).values}get fnOpts(){return this.currentButton.key_data[this.data.fn].values}ngOnDestroy(){this.destory$.next(),this.destory$.complete()}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(i.a),r.Nb(j.a),r.Nb(P.a),r.Nb($.a))},t.\u0275cmp=r.Hb({type:t,selectors:[["ng-component"]],decls:6,vars:5,consts:[[1,"option-container"],[3,"opt","changed"],[3,"opt","changed",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary","matDialogClose","",1,"confirm-btn"]],template:function(t,e){1&t&&(r.Tb(0,"div",0),r.Tb(1,"sayo-options-item",1),r.bc("changed",function(t){return e.onModeChange(t)}),r.Sb(),r.Ec(2,L,1,1,"sayo-options-item",2),r.Tb(3,"button",3),r.Gc(4),r.gc(5,"translate"),r.Sb(),r.Sb()),2&t&&(r.Bb(1),r.kc("opt",e.modeOption),r.Bb(1),r.kc("ngForOf",e.options),r.Bb(2),r.Ic(" ",r.hc(5,3,"COMMON.CONFIRM")," "))},styles:[".option-container[_ngcontent-%COMP%]{height:100%;width:30rem}.confirm-btn[_ngcontent-%COMP%]{width:100%;margin-top:3rem}"]}),t})()},cnJX:function(t,e,n){"use strict";n.d(e,"a",function(){return b});var i=n("0IaG"),o=n("fXoL"),s=n("kmnG"),c=n("qFsG"),a=n("3Pt+"),r=n("ofXK"),d=n("bTqV"),l=n("NFeN"),h=n("sYmb");function u(t,e){if(1&t){const t=o.Ub();o.Tb(0,"button",10),o.bc("click",function(){return o.tc(t),o.fc().result=""}),o.Tb(1,"mat-icon"),o.Gc(2,"close"),o.Sb(),o.Sb()}}let b=(()=>{class t{constructor(t,e){this.data=t,this._dialogRef=e,this.result=t.content}confirm(){this._dialogRef.close({success:!0,content:this.result})}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(i.a),o.Nb(i.g))},t.\u0275cmp=o.Hb({type:t,selectors:[["ng-component"]],decls:18,vars:17,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"hintLabel"],["type","text","matInput","","autocomplete","off",3,"ngModel","maxlength","ngModelChange"],["input",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["align","end"],["mat-dialog-actions",""],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"click"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(t,e){if(1&t&&(o.Tb(0,"div",0),o.Gc(1),o.gc(2,"translate"),o.Sb(),o.Tb(3,"div",1),o.Tb(4,"mat-form-field",2),o.gc(5,"translate"),o.Tb(6,"input",3,4),o.bc("ngModelChange",function(t){return e.result=t}),o.Sb(),o.Ec(8,u,3,0,"button",5),o.Tb(9,"mat-hint",6),o.Gc(10),o.Sb(),o.Sb(),o.Sb(),o.Tb(11,"div",7),o.Tb(12,"button",8),o.Gc(13),o.gc(14,"translate"),o.Sb(),o.Tb(15,"button",9),o.bc("click",function(){return e.confirm()}),o.Gc(16),o.gc(17,"translate"),o.Sb(),o.Sb()),2&t){const t=o.qc(7);o.Bb(1),o.Hc(o.hc(2,9,null==e.data?null:e.data.title)),o.Bb(3),o.kc("hintLabel",o.hc(5,11,e.data.warn)),o.Bb(2),o.kc("ngModel",e.result)("maxlength",e.data.maxLength),o.Bb(2),o.kc("ngIf",e.result),o.Bb(2),o.Jc("",(null==t.value?null:t.value.length)||0,"/",e.data.maxLength,""),o.Bb(3),o.Ic(" ",o.hc(14,13,"COMMON.CANCEL")," "),o.Bb(3),o.Ic(" ",o.hc(17,15,"COMMON.CONFIRM")," ")}},directives:[i.h,i.e,s.b,c.b,a.c,a.l,a.n,a.h,r.k,s.e,i.c,d.a,i.d,s.f,l.a],pipes:[h.c],styles:[".mat-dialog-content[_ngcontent-%COMP%] {\n        width: 37.5rem;\n      }"]}),t})()},gcYM:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var i=n("7o/Q"),o=n("D0XW");n("zx2A");const s={leading:!0,trailing:!1};function c(t,e=o.a,n=s){return i=>i.lift(new a(t,e,n.leading,n.trailing))}class a{constructor(t,e,n,i){this.duration=t,this.scheduler=e,this.leading=n,this.trailing=i}call(t,e){return e.subscribe(new r(t,this.duration,this.scheduler,this.leading,this.trailing))}}class r extends i.a{constructor(t,e,n,i,o){super(t),this.duration=e,this.scheduler=n,this.leading=i,this.trailing=o,this._hasTrailingValue=!1,this._trailingValue=null}_next(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(d,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)}}function d(t){const{subscriber:e}=t;e.clearThrottle()}},ysIn:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("fXoL"),o=n("mkZv"),s=n("YMfE"),c=n("Qu3c"),a=n("sYmb");let r=(()=>{class t{constructor(){this.selected=new i.o}ngOnChanges(t){const{instance:e}=t;e&&(this.name=this.getButtonName(e.currentValue))}selectButton(t){this.selected.emit(t)}getButtonName(t){const e=this.buttonCmdOpt.mode.find(e=>e.code===t.code);if(0===t.code){const e=Object(s.o)(Object(s.i)(t.values[0],o.t),""),n=Object(s.m)(t.values[1]);return Object(s.p)(e,n)}return e?e.name:""}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Hb({type:t,selectors:[["sayo-button-instance"]],inputs:{instance:"instance",buttonCmdOpt:"buttonCmdOpt"},outputs:{selected:"selected"},features:[i.zb],decls:3,vars:4,consts:[["matTooltipPosition","above",1,"button-instance-wrapper","one-line",3,"matTooltip","click"]],template:function(t,e){1&t&&(i.Tb(0,"div",0),i.bc("click",function(){return e.selectButton(e.instance)}),i.Gc(1),i.gc(2,"translate"),i.Sb()),2&t&&(i.kc("matTooltip",e.name),i.Bb(1),i.Ic(" ",i.hc(2,2,e.name),"\n"))},directives:[c.a],pipes:[a.c],styles:[".button-instance-wrapper[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:center;align-items:center;font-size:12px;background-color:#2e353b;width:64px;height:64px;border-radius:4px}.button-instance-wrapper[_ngcontent-%COMP%]:hover{background-color:#c2185b}"]}),t})()},zjsp:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var i=n("XNiG"),o=n("1G5W"),s=n("fXoL"),c=n("8SIa"),a=n("dNgK"),r=n("bTqV"),d=n("sYmb");let l=(()=>{class t{constructor(t,e){this.deviceService=t,this._snakbar=e,this.destory$=new i.a}ngOnInit(){this.deviceService.device$.pipe(Object(o.a)(this.destory$)).subscribe(t=>{t&&(this.session=t.session)})}saveForver(){this.deviceService.writeConfig(this.session).pipe(Object(o.a)(this.destory$)).subscribe(t=>{this._snakbar.open("Save Successful!")})}ngOnDestroy(){this.destory$.next(),this.destory$.complete()}}return t.\u0275fac=function(e){return new(e||t)(s.Nb(c.a),s.Nb(a.b))},t.\u0275cmp=s.Hb({type:t,selectors:[["save-forver"]],decls:4,vars:8,consts:[["mat-raised-button","","color","primary",1,"save-btn",3,"disabled","click"]],template:function(t,e){1&t&&(s.Tb(0,"button",0),s.bc("click",function(){return e.saveForver()}),s.Gc(1),s.gc(2,"translate"),s.gc(3,"translate"),s.Sb()),2&t&&(s.kc("disabled",0===(null==e.deviceService?null:e.deviceService.modifyCount)),s.Bb(1),s.Kc(" ",s.hc(2,4,"COMMON.SAVE")," (",s.hc(3,6,"COMMON.COUNTER"),": ",null==e.deviceService?null:e.deviceService.modifyCount,") "))},directives:[r.a],pipes:[d.c],styles:[".save-btn[_ngcontent-%COMP%] {\n        position: absolute;\n        top: 1rem;\n        right: 1rem;\n      }"]}),t})()}}]);